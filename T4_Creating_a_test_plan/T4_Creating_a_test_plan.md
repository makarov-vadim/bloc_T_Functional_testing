# Задача T4. Составление плана тестирования

## Условие задачи:
- Имеется 2 сервиса: Cервис А и сервис B. Cервис А принимает REST запросы на подключение, отключение и блокирование 
услуги, отсылает amqp сообщение сервису B, который в свою очередь выполняет отключение, подключение услуги и сообщает 
в ответном amqp сообщение результат операции.
- Сервис А принимает запросы и обеспечивает упорядочивание amqp-команд отправляемых на сервис В.
- Cервис А принимает запросы на изменения состояния услуги независимо от результатов взаимодействия с сервисом В. 
Взаимодействие с сервисом B осуществляется в отдельном потоке. Статус услуги изменяется, только после получения 
положительного ответа от сервиса В.
- Сервис А не отправляет следующую команду, пока не получит ответ на предыдущую команду от сервиса B

![img.png](attachments/img_1.png)

## Требуется:
Составить план тестирования, верхнеуровнево описать проверяемые тест кейсы.


## План тестирования:

### Юнит-тестирование
- Проверить REST запросы для Сервиса A и Сервиса B изолированно друг от друга.
  - Валидные/невалидные данные в запросах
  - Корректность ответов на запросы
- Проверить упорядочивание amqp-команд на сервисе A.

С использованием заглушек (Mocks/Stubs/Fakes) протестировать:
- Поведение сервиса A.
  - Запрос 1 от клиента получен и обработан (клиенту отправлен ответ с HTTP-кодом). Статус услуги на сервисе А не изменился.
  - Запрос 2 от клиента получен и обработан (клиенту отправлен ответ с HTTP-кодом). Статус услуги на сервисе А не изменился.
  - Запрос 3, составленный сервисом А для сервиса B соответствует запросу 1 от клиента на сервис А.
  - Запрос 4, составленный сервисом А для сервиса B соответствует запросу 2 от клиента на сервис А.
  - Запрос 3 из сервиса А направлен на сервис B (получен ответ с HTTP-кодом). Статус услуги на сервисе А не изменился.
  - Запрос 4 из сервиса А на сервис B не направлен, так как от сервиса B не пришел ответ по запросу 3.
  - На сервис А из сервиса B пришел ответ на запрос 3 об изменении/неизменении статуса услуги. Статус услуги на сервисе А изменился/не изменился.
  - Запрос 4 из сервиса А направлен на сервис B (получен ответ с HTTP-кодом). Статус услуги на сервисе А не изменился.
  - На сервис А из сервиса B пришел ответ на запрос 4 об изменении/неизменении статуса услуги. Статус услуги на сервисе А изменился/не изменился.

- Поведение сервиса B при запросе от сервиса А.
  - Запрос от сервиса А получен (отправлен ответ с HTTP-кодом).
  - На сервисе B сработал алгоритм изменения/неизменения статуса услуги. Статус услуги на сервисе B изменился/не изменился.
  - На сервис А из сервиса B направлен ответ об изменении/неизменении статуса услуги (получен ответ с HTTP-кодом).

### Интеграционное тестирование
- Проверить корректность соединения Сервиса А, брокера сообщений и сервиса В
- Проверить поведение сервисов A и B. Результат согласно юнит-тестированию с использованием заглушек.